"use strict";$(document).ready(function(){"undefined"==typeof savedCourses||0===savedCourses.length?$("#empty-open-course").css("display","block"):$("#open-course-container").css("display","block");var e=function(e){var t=["January","February","March","April","May","June","July","August","September","October","November","December"],o=new Date(e);return t[o.getMonth()]+" "+o.getDate()+", "+o.getFullYear()};!function(t){var o=$("#open-courses-list");savedCourses.forEach(function(t){var a=$(document.createElement("div")).addClass("col-md-4").appendTo(o),n=$(document.createElement("div")).addClass("card-container").attr("data-id",t.id).appendTo(a),r=$(document.createElement("div")).appendTo(n),s=($(document.createElement("span")).addClass("course-card-title").attr("data-id",t.id).attr("data-toggle","modal").attr("data-target","#basicExample").attr("unselectable","on").attr("onselectstart","return false").attr("onmousedown","return false").text(t.title).appendTo(r),$(document.createElement("div")).addClass("course-card-desc").text("Date Created: "+e(t.id)).appendTo(n),$(document.createElement("div")).appendTo(n));$(document.createElement("canvas")).attr("id",t.id).css("height","8em").appendTo(s)})}(),function(e){var t=[];savedCourses.forEach(function(e){var o=$("#"+e.id)[0].getContext("2d"),a={labels:["Completed","Not Completed"],datasets:[{data:[e.completedNumSections,e.totalNumSections-e.completedNumSections],backgroundColor:["rgba(50, 205, 50, 0.2)","rgba(126, 126, 126, 0.2)"],borderColor:["rgba(50, 205, 50, 1)","rgba(126, 126, 126, 1)"],borderWidth:1}]};t.push({graph:e.id,context:o,data:a,type:"doughnut"})}),t.forEach(function(e){e.graph=new Chart(e.context,{type:e.type,data:e.data,options:{legend:{display:!0,position:"left"},responsive:!0,maintainAspectRatio:!1}})})}();var t=void 0;$(".course-card-title").click(function(o){var a=$(o.target).text(),n=parseInt($(o.target).attr("data-id")),r=e(n),s=savedCourses.reduce(function(e,t){return t.id===n?t:e},null);t=n,$("#modal-title").html(a),$("#modal-id").html("Course ID: "+n),$("#modal-date-created").html("Course Created: "+r),$("#modal-course-progress").html(s.completedNumSections+" of "+s.totalNumSections+" section(s) complete.");var l=$("#modal-course-progress-chart")[0].getContext("2d");new Chart(l,{type:"horizontalBar",data:{labels:["Completed"],datasets:[{data:[s.completedNumSections],backgroundColor:["rgba(50, 205, 50, 0.2)"],borderColor:["rgba(50, 205, 50, 1)"],borderWidth:1}]},options:{scales:{xAxes:[{stacked:!0,ticks:{max:s.totalNumSections,min:0,stepSize:1}}]},legend:{display:!1},responsive:!0,maintainAspectRatio:!1}})}),$("#btn-modal-open").click(function(){var e={id:t};$("#loading-title").html(""),$("#loading-title").html("Opening course"),$("#loading-container").css("z-index","99999"),$("#loading-container").css("display","block"),$.ajax({type:"POST",data:JSON.stringify(e),contentType:"application/json",url:"/open-course",success:function(e){(e=e.courseOpened)&&console.log("Success: course opened."),setTimeout(function(){$("#loading-container").css("display","none")},1e3)},error:function(e){e=e.responseJSON,err.openingCourseFromDB?console.log("Error: a problem occurred opening course from database."):console.log("Error: a problem occurred."),$("#loading-title").html(""),$("#loading-title").html("A problem occurred opening the course."),setTimeout(function(){$("#loading-container").css("display","none")},1e3)}})}),$("#btn-modal-delete").click(function(){var e={id:t};$("#loading-title").html(""),$("#loading-title").html("Deleting course"),$("#loading-container").css("z-index","99999"),$("#loading-container").css("display","block"),$.ajax({type:"DELETE",data:JSON.stringify(e),contentType:"application/json",url:"/delete-course",success:function(e){(e=e.courseDeleted)&&console.log("Success: course deleted."),$("#loading-title").html(""),$("#loading-title").html("Course successfully deleted."),setTimeout(function(){$("#loading-container").css("display","none"),setTimeout(function(){location.reload(!1)},100)},1e3)},error:function(e){e=e.responseJSON,err.deleteCourseNullID?console.log("Error: deleting course with null id."):err.deletingCourseFromDB?console.log("Error: a problem occurred deleting course from database."):console.log("Error: a problem occurred."),$("#loading-title").html(""),$("#loading-title").html("A problem occurred deleting the course."),setTimeout(function(){$("#loading-container").css("display","none")},1e3)}})})});